<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="/css/addUser/addUser.css">
    <style>
.custom-file-upload {
    display: inline-block;
    padding: 10px 20px;
    cursor: pointer;
    background-color: #4CAF50;
    color: white;
    border-radius: 5px;
    border: none;
    transition: background-color 0.3s ease;
}

.custom-file-upload:hover {
    background-color: #45a049;
}

.custom-file-upload i {
    margin-right: 5px;
}
    </style>
</head>

<body>
    <div class="container p-4">
        <div class="row">
            <div class="col-md-8 mx-auto">
                <div class="card">
                    <div class="card-body">
                        {{#each company}}
                        <form action="/fud/{{id}}/edit-company" method="POST" enctype="multipart/form-data" id="myForm">
                            <div class="form-group">
                                <center>
                                    {{#if path_logo}}
                                        <img src="{{path_logo}}" class="logoCompany" id="imgEmployee">
                                    {{else}}
                                        <img src="https://cdn.pixabay.com/photo/2017/01/25/17/35/picture-2008484_1280.png"
                                            class="logoCompany" id="imgEmployee">
                                    {{/if}}
                                </center>
                                <br>
                                <label for="inputImg" class="custom-file-upload">
                                    <input type="file" name="image" accept="image/*" id="inputImg" style="display: none;">
                                    <i class="fas fa-upload"></i> Subir imagen
                                </label>
                            </div>
                            <div class="form-group">
                                <label>Nombre de la empresa *</label><br>
                                <input type="text" class="form-control" name="name" placeholder="Nombre de la empresa"
                                    value="{{name}}" autofocus required>
                            </div>
                            <div class="form-group">
                                <label>Alias *</label><br>
                                <input type="text" class="form-control" name="alias" placeholder="Alias"
                                    value="{{alias}}" maxlength="30" pattern="^\S{0,30}$" required>
                            </div>
                            <div class="form-group">
                                <label>Descripción</label><br>
                                <textarea class="form-control" name="description" placeholder="Descripción" rows="2"
                                    maxlength="100" pattern="^\S{0,100}$">{{description}}</textarea>
                            </div>
                            <div class="form-group">
                                <label>Representante *</label><br>
                                <input type="text" class="form-control" name="representative"
                                    placeholder="Representante" value="{{representative}}" maxlength="50"
                                    pattern="^\S{0,50}$" required>
                            </div>
                            <div class="form-group">
                                <label>Teléfono</label><br>
                                <input type="text" class="form-control" name="phone" placeholder="Teléfono"
                                    value="{{phone}}" maxlength="16" pattern="^\S{0,16}$">
                            </div>
                            <div class="form-group">
                                <label>Celular</label><br>
                                <input type="text" class="form-control" name="cell_phone" placeholder="Celular"
                                    value="{{cell_phone}}" maxlength="16" pattern="^\S{0,16}$">
                            </div>
                            <div class="form-group">
                                <label>Correo electrónico *</label><br>
                                <input type="email" class="form-control" name="email" placeholder="Correo electrónico"
                                    value="{{email_company}}" maxlength="100" pattern="^\S{0,100}$" required>
                            </div>

                            <div class="form-group">
                                <label>País *</label><br>
                                <select class="form-select" aria-label="Seleccionar país" name="country"
                                    value="{{id_country}}">
                                    {{/each}}
                                    {{#each country}}
                                    <option value="{{id}}">{{name}}</option>
                                    {{/each}}
                                </select>
                            </div>

                            {{#each company}}
                            <div class="form-group">
                                <label>Municipio *</label><br>
                                <input type="text" class="form-control" name="municipality" value="{{municipality}}"
                                    placeholder="Municipio" required>
                            </div>
                            <div class="form-group">
                                <label>Ciudad *</label><br>
                                <input type="text" class="form-control" name="city" placeholder="Ciudad"
                                    value="{{city}}" required>
                            </div>
                            <div class="form-group">
                                <label>Colonia *</label><br>
                                <input type="text" class="form-control" name="cologne" placeholder="Colonia"
                                    value="{{cologne}}" required>
                            </div>
                            <div class="form-group">
                                <label>Calle *</label><br>
                                <input type="text" class="form-control" name="street" placeholder="Calle"
                                    value="{{states}}" maxlength="20" pattern="^\S{0,20}$" required>
                            </div>
                            <div class="form-group">
                                <label>Número exterior</label><br>
                                <input type="text" class="form-control" name="num_o" placeholder="Número exterior"
                                    value="{{num_ext}}" maxlength="5" pattern="^\S{0,5}$">
                            </div>
                            <div class="form-group">
                                <label>Número interior</label><br>
                                <input type="text" class="form-control" name="num_i" placeholder="Número interior"
                                    value="{{num_int}}" maxlength="5" pattern="^\S{0,5}$">
                            </div>
                            <div class="form-group">
                                <label>Código Postal *</label><br>
                                <input type="tex" class="form-control" name="postal_code" placeholder="Código Postal"
                                    value="{{postal_code}}" pattern="[0-9]{5}" required>
                            </div>
                            <div class="form-group">
                                <button class="btn btn-success btn-block" type="submit">Actualizar</button>
                            </div>
                            {{/each}}
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{>updateSelects}}
    <script src="/js/manager/addEmployee.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
    <script src="js/chosen.jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".chosen-select").chosen({ no_results_text: 'No hay resultados para ' });
        });
    </script>
    <script>
        $(document).ready(function () {
            // Seleccionar todas las imágenes con la clase "company-logo"
            $(".logoCompany").each(function () {
                var img = $(this);

                // Crear una nueva imagen para verificar la existencia
                var tempImg = new Image();
                tempImg.src = img.attr("src");

                // Verificar si la imagen se cargó correctamente
                tempImg.onload = function () {
                    // La imagen existe, no se necesita hacer nada
                };

                tempImg.onerror = function () {
                    // La imagen no existe, cambiar la fuente a la imagen predeterminada
                    img.attr("src", "https://cdn.pixabay.com/photo/2017/01/25/17/35/picture-2008484_1280.png");
                };
            });
        });
    </script>
</body>

</html>