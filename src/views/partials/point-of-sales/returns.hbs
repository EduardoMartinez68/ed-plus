{{>returns/formReturn}}




<script>
    document.addEventListener('DOMContentLoaded', () => {
    // Aquí defines o asignas la función para que esté lista después del DOM
    async function open_pop_returns(id) {
        const return_ticket = document.getElementById('return_ticket');
        if (return_ticket == null) {
        // primero verificamos si el usuario tiene permisos
        if (!await this_user_is_admin('Devolver ticket 📄', 'return_ticket')) {
            warningMessage('🕵️‍♂️ ¡Acceso denegado!', 'No tienes permiso para hacer devoluciones de tickets.');
            return;
        }
        }

        show_message_pop(id);
        document.getElementById('search-ticket').focus();
    }

    // Opcional: asignar a window si quieres que sea global
    window.open_pop_returns = open_pop_returns;
    });
</script>