<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="/css/addUser/addUser.css">
</head>

<body>
    <div class="container p-4">
        <div class="row">
            <div class="col-md-8 mx-auto">
                <div class="card">
                    <div class="card-body">
                        {{#each company}}
                        <form action="/fud/{{id}}/editCompany" method="POST" enctype="multipart/form-data" id="myForm">
                            <div class="form-group">
                                <center>
                                    {{#if path_logo}}
                                        <img src="{{path_logo}}" class="logoCompany" id="imgEmployee">
                                    {{else}}
                                        <img src="https://cdn.pixabay.com/photo/2017/01/25/17/35/picture-2008484_1280.png" class="logoCompany" id="imgEmployee">
                                    {{/if}}
                                </center>
                            </div>
                            <div class="form-group">
                                <input type="file" name="image" accept="image/*" class="form-control" id="inputImg" value="{{path_logo}}">
                            </div>
                            <div class="form-group">
                                <lable>Name company *</lable><br>
                                <input type="tex" class="form-control" name="name" placeholder="Name Company" value="{{name}}" maxlength="50" pattern="^\S{0,50}$" autofocus required>
                            </div>
                            <div class="form-group">
                                <lable>Alias *</lable><br>
                                <input type="tex" class="form-control" name="alias" placeholder="Alias" value="{{alias}}" maxlength="10" pattern="^\S{0,10}$" required>
                            </div>
                            <div class="form-group">
                                <lable>Description</lable><br>
                                <textarea class="form-control" name="description" placeholder="Description" rows="2" maxlength="100" pattern="^\S{0,100}$">{{description}}</textarea>
                            </div>
                            <div class="form-group">
                                <lable>Representative *</lable><br>
                                <input type="tex" class="form-control" name="representative" placeholder="Representative" value="{{representative}}" maxlength="50" pattern="^\S{0,50}$" required>
                            </div>
                            <div class="form-group">
                                <lable>Phone</lable><br>
                                <input type="tex" class="form-control" name="phone" placeholder="Phone" value="{{phone}}" maxlength="16" pattern="^\S{0,16}$">
                            </div>
                            <div class="form-group">
                                <lable>Cell Phone</lable><br>
                                <input type="tex" class="form-control" name="cell_phone" placeholder="Cell Phone" value="{{cell_phone}}" maxlength="16" pattern="^\S{0,16}$">
                            </div>
                            <div class="form-group">
                                <lable>E-mail *</lable><br>
                                <input type="email" class="form-control" name="email" placeholder="E-mail" value="{{email_company}}" maxlength="100" pattern="^\S{0,100}$" required>
                            </div>   
                            {{/each}}


                            {{>country}}

                            {{#each company}}
                                <div class="form-group">
                                    <lable>Municipality *</lable><br>
                                    <input type="tex" class="form-control" name="municipality" value="{{municipality}}" placeholder="Municipality" required>
                                </div>
                                <div class="form-group">
                                    <lable>City *</lable><br>
                                    <input type="tex" class="form-control" name="city" placeholder="City" value="{{city}}" required>
                                </div>
                                <div class="form-group">
                                    <lable>Cologne *</lable><br>
                                    <input type="tex" class="form-control" name="cologne" placeholder="Cologne" value="{{cologne}}" required>
                                </div>
                                <div class="form-group">
                                    <lable>Street *</lable><br>
                                    <input type="tex" class="form-control" name="street" placeholder="Street" value="{{states}}" maxlength="20" pattern="^\S{0,20}$" required>
                                </div>
                                <div class="form-group">
                                    <lable>Outer Numbers</lable><br>
                                    <input type="tex" class="form-control" name="num_o" placeholder="Outer Number" value="{{num_ext}}" maxlength="5" pattern="^\S{0,5}$">
                                </div>
                                <div class="form-group">
                                    <lable>Interior Number</lable><br>
                                    <input type="tex" class="form-control" name="num_i" placeholder="Interior Number" value="{{num_int}}" maxlength="5" pattern="^\S{0,5}$">
                                </div>
                                <div class="form-group">
                                    <lable>Postal Code *</lable><br>
                                    <input type="tex" class="form-control" name="postal_code" placeholder="Interior Number" value="{{postal_code}}" pattern="[0-9]{5}" required>
                                </div>
                                <div class="form-group">
                                    <button class="btn btn-success btn-block" type="submit">Update</button>
                                </div>
                            {{/each}}
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/manager/addEmployee.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
    <script src="js/chosen.jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".chosen-select").chosen({ no_results_text: 'No hay resultados para ' });
        });
    </script>
    <script>
        $(document).ready(function () {
            // Seleccionar todas las imágenes con la clase "company-logo"
            $(".logoCompany").each(function () {
                var img = $(this);

                // Crear una nueva imagen para verificar la existencia
                var tempImg = new Image();
                tempImg.src = img.attr("src");

                // Verificar si la imagen se cargó correctamente
                tempImg.onload = function () {
                    // La imagen existe, no se necesita hacer nada
                };

                tempImg.onerror = function () {
                    // La imagen no existe, cambiar la fuente a la imagen predeterminada
                    img.attr("src", "https://cdn.pixabay.com/photo/2017/01/25/17/35/picture-2008484_1280.png");
                };
            });
        });
    </script>
</body>

</html>